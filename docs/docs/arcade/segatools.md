---
comments: true
---

# SEGATOOLS 通用配置设置

<div align="center">
  <img src="/assets/segatools.png">
</div>

!!! warning "观看前必读"

    本文档系对 [TeamTofuShop/segatools](https://gitea.tendokyu.moe/TeamTofuShop/segatools) 的配置文档进行翻译并附带笔者个人理解的产物。

    **文档说明可能会因为笔者的理解能力而产生误差。**
    
    如果您对文档内容有疑问，欢迎访问[原文链接](https://gitea.tendokyu.moe/TeamTofuShop/segatools/src/branch/develop/doc/config/common.md)或下方评论区讨论！

!!! info "本页可发表评论，如有问题、反馈、评价等，欢迎发表评论。"

!!! info "CHUNITHM 专用控制器用户必读"

    如果您使用的控制器为 TASOLLER (抬手乐) / TASOLLER PLUS (抬手乐普拉斯) / ZhouSensor (大四) 的其中一种或者几种，请使用 fufubot 版本的 Segatools！

此文档描述了适用于所有游戏的 Segatools 配置设置。

键盘绑定设置使用[虚拟键码](https://learn.microsoft.com/zh-cn/windows/win32/inputdev/virtual-key-codes)。
 ---

## **配置路径**

配置文件的默认路径是 `./segatools.ini`。

您可以通过修改环境变量 `SEGATOOLS_CONFIG_PATH` 来指定其他路径。

例如，您可以创建一个包含以下代码的 `start.bat` 文件，然后将 `segatools.ini` 复制为 `another_config.ini`，并在其中设置不同的 DNS 主机地址。

``` batch title="cmd"
set SEGATOOLS_CONFIG_PATH=.\another_config.ini
```

---

## **[aimeio]**

!!! note ""

    ### **`path`**

    指定第三方读卡器驱动程序 DLL 的路径。默认值为空（使用基于文本文件和键盘输入的内置模拟功能）。

    在之前的 Segatools 版本中，这一功能通过替换 Segatools 自带的 `aimeio.dll` 文件来实现。而在最新版本中，Segatools 不再附带单独的 `aimeio.dll` 文件（其功能现已集成到各个挂钩 DLL 中）。

---

## **[aime]**

控制 Aime 读卡器组件的模拟功能。

!!! note ""

    ### **`enable`**

    默认值：`1`

    启用 Aime 读卡器组件的模拟功能。禁用此选项可使用真实的 SEGA Aime 读卡器（COM 端口号因游戏而异）。

!!! note ""

    ### **`portNo`**

    默认值：`因游戏而异`

    设置用于 Aime 读卡器组件的 COM 端口。

!!! note ""

    ### **`highBaud`**

    默认值：`1`

    启用 Aime 读卡器的高波特率 115200（而非 38400）。某些游戏（如 CHUNITHM）需要此设置，而其他游戏（如 WACCA）则不需要。

!!! note ""

    ### **`gen`**

    默认值：`1`

    更改 Aime 读卡器的版本，这也会改变游戏中提供的 LED 信息。

    | 代码 | 型号                                              |
    |------|---------------------------------------------------|
    | 1    | TN32MSEC003S H/W Ver3.0 / TN32MSEC003S F/W Ver1.2 |
    | 2    | 837-15286 / 94                                    |
    | 3    | 837-15396 / 94                                    |


!!! note ""

    ### **`aimePath`**

    默认值：`DEVICE\aime.txt`

    指向包含经典 Aime IC 卡 ID 的文本文件路径。

    !!! warning "注意"

        Aime 卡ID为20位阿拉伯数字。

!!! note ""

    ### **`aimeGen`**

    默认值：`1`

    如果指定路径 `aimePath` 的文件不存在，是否生成一个随机的 Aime ID。

!!! note ""

    ### **`felicaPath`**

    默认值：`DEVICE\felica.txt`

    指向包含 FeliCa 电子现金卡 IDm 序列号的文本文件路径。

!!! note ""

    ### **`felicaGen`**

    默认值：`0`

    如果指定路径 `felicaPath` 的文件不存在，是否生成一个随机的 FeliCa ID。

!!! note ""

    ### **`scan`**

    默认值：`0x0D`（VK_RETURN）

    虚拟键码。如果按住此按钮，则模拟的 IC 卡读卡器会模拟其附近的 IC 卡。可以模拟多种不同的 IC 卡；模拟的具体卡片类型取决于配置的卡 ID 文件是否存在。

---

## **[vfd]**
控制 VFD GP1232A02A FUTABA 组件的模拟功能。

!!! note ""

    ### **`enable`**
    默认值：`1`

    启用 VFD 模拟功能。禁用此选项可使用真实的 VFD GP1232A02A FUTABA 组件（COM 端口号因游戏而异）。

!!! note ""

    ### **`portNo`**

    默认值：`因游戏而异`

    设置用于 VFD 组件的 COM 端口。

!!! note ""

    ### **`utfConversion`**

    默认值：`0`

    将 VFD 中的字符串从各自的编码转换为 UTF，这样控制台输出在非日本区域设置下会正确显示。

---

## **[amvideo]**

控制内置于 Segatools 的 amvideo.dll 模拟程序。这个程序通常存在于 SEGA 操作系统镜像中，负责更改屏幕分辨率和方向。

!!! note ""

    ### **`enable`**

    默认值：`1`

    启用 amvideo.dll 模拟程序。禁用此选项可使用真实的 amvideo.dll 文件。

    !!! warning "请注意"

        您必须安装正确的注册表设置，并且必须使用与您的 GPU 供应商匹配的 `amvideo.dll` 版本（因为这些 DLL 使用供应商特定的 API）。


---

## **[clock]**

控制 Windows 时间 API 的钩子。

!!! note ""

    ### **`timezone`**

    默认值：`1`

    将系统时区设置为 JST（日本标准时间）。如果系统时区不是 JST，SEGA 游戏可能会出现奇怪的故障。除非存在实现上的 bug，否则不应禁用此钩子，但如果需要，仍然提供了禁用的选项。

!!! note ""

    ### **`timewarp`**

    默认值：`0`

    实验性的时间扭曲钩子，用于跳过硬编码的服务器维护期间。这会导致游戏内报告不正确的时间。

    !!! example "实验性功能注意"

        针对这个问题已经有更好的解决方案，且此功能可能很快会被移除。

!!! note ""

    ### **`writeable`**

    默认值：`0`

    允许游戏调整系统时钟和时区设置。通常情况下应保持为 0，但如果需要，提供了此选项。

---

## **[dns]**

控制网络服务器主机名查询的重定向。

!!! note ""

    ### **`default`**

    默认值：`localhost`

    控制所有常见网络服务服务器的主机名，除非下面的特定设置覆盖此项。大多数用户只需要更改此设置。此外，游戏本身会特别检查并拒绝回环地址；此设置需要是局域网或广域网 IP 地址（或解析到该地址的主机名）。

!!! note ""

    ### **`title`**

    默认值：`title`

    将其保留为 `title` 以使用 ALL.Net 返回的标题服务器。为某些游戏（例如 crossbeats REV）重写标题服务器主机名。

!!! note ""

    ### **`router`**

    默认值：` ` （即使用默认设置中的值）。

    覆盖 tenporouter.loc 和 bbrouter.loc 主机名查询的目标。

!!! note ""

    ### **`startup`**

    默认值：` ` （即使用默认设置中的值）。

    覆盖 naominet.jp 主机名查询的目标。

!!! note ""

    ### **`billing`**

    默认值：` ` （即使用默认设置中的值）。

    覆盖 ib.naominet.jp 主机名查询的目标。

!!! note ""

    ### **`aimedb`**

    默认值：` ` （即使用默认设置中的值）。

    覆盖 aime.naominet.jp 主机名查询的目标。

!!! note ""

    ### **`replaceHost`**

    默认值：`0`

    将 HTTP 请求头中的 HOST 字段替换为上述设置。这可能有助于绕过某些地区的网络限制。

!!! note ""

    ### **`startupPort`**

    默认值：`0` （即不会执行任何操作）

    覆盖与启动服务器的连接端口。当前的实现会影响所有到端口 80 的 TCP 连接。

!!! note ""

    ### **`billingPort`**

    默认值：`0` （即不会执行任何操作）

    覆盖与计费服务器的连接端口。当前的实现会影响所有到端口 8443 的 TCP 连接。

!!! note ""

    ### **`aimedbPort`**

    默认值：`0` （即不会执行任何操作）

    覆盖与 aimedb 服务器的连接端口。当前的实现会影响所有到端口 22345 的 TCP 连接。

---

## **[ds]**

控制 AMEX PCIe 板上 "DS（Dallas Semiconductor）EEPROM" 芯片的模拟。这是一个小型（32 字节）的 EEPROM，包含序列号和区域代码信息。

!!! warning "注意"

    除非在 Sega Nu 的初始工厂配置过程中，否则通常不会对其进行写操作。

!!! note ""

    ### **`enable`**

    默认值：`1`

    启用 DS EEPROM 模拟。禁用此选项可使用真实 AMEX 上的 DS EEPROM 芯片。

!!! note ""

    ### **`region`**

    默认值：`1`

    AMEX 板的区域代码。看起来这应该是一个位掩码（bit mask）？

    | 代码 | 区域                        |
    |------|-----------------------------|
    | 1    | Japan                       |
    | 2    | USA？（废弃代码，不再使用） |
    | 4    | Export                      |
    | 8    | China                       |


!!! note ""

    ### **`serialNo`**

    默认值：`AAVE-01A99999999`

    "MAIN ID" 序列号。前三个字符是硬件系列：

    | 代码 | 平台        |
    |------|-------------|
    | AAV  | Nu-series   |
    | AAW  | NuSX-series |
    | ACA  | ALLS-series |


---

## **[eeprom]**

控制 AMEX PCIe 板上大容量 EEPROM 的模拟。该芯片存储状态和配置信息。

!!! note ""

    ### **`enable`**

    默认值：`1`

    启用大容量 EEPROM 模拟。禁用此选项可使用真实 AMEX 上的大容量 EEPROM 芯片。

!!! note ""

    ### **`path`**

    默认值：`DEVICE\eeprom.bin`

    EEPROM 模拟存储文件的路径。如果该文件不存在，将自动创建并初始化为适当数量的零字节。

---

## **[gpio]**

配置 AMEX PCIe GPIO（通用输入输出）控制器的模拟。

!!! note ""

    ### **`enable`**

    默认值：`1`

    启用 GPIO 模拟。禁用此选项可使用真实 AMEX 上的 GPIO 控制器。

!!! note ""

    ### **`sw1`**

    默认值：`0x70` (VK_F1)

    Nu 机箱 SW1 按钮（备用测试）的键盘绑定。

!!! note ""

    ### **`sw2`**

    默认值：`0x71` (VK_F2)

    Nu 机箱 SW2 按钮（备用服务）的键盘绑定。

!!! note ""

    ### **`dipsw1`**

    默认值：`1`

    因游戏而异，但通常控制“分发服务器”设置。必须将机柜路由器上的恰好一台游戏机设置为服务器模式。

    | 代码 | 模式   |
    |------|--------|
    | 0    | 客户端 |
    | 1    | 服务器 |


!!! note ""

    ### **`dipsw2`**

    默认值：`0`

    用于设置 CHUNITHM 的显示器类型。

    | 代码 | 类型   |
    |------|--------|
    | 0    | 120fps |
    | 1    | 60fps  |

    
    也用于《马里奥与索尼克》配置机柜 ID，或者可能也用于其他游戏。

!!! note ""

    ### **`dipsw3`**

    默认值：`0`

    用于设置 CHUNITHM 的 Aime 读卡器硬件类型。

    | 代码 | 类型 |
    |------|------|
    | 0    | SP   |
    | 1    | CVT  |

    
    用于《马里奥与索尼克》配置机柜 ID，或者可能也用于其他游戏。

!!! note ""

    ### **`dipsw4`**

    默认值：`0`

    屏幕方向。仅在 Nu 系统启动程序中使用。

    | 代码 | 屏幕方向  |
    |------|-----------|
    | 0    | 横向/YOKO |
    | 1    | 纵向/TATE |


!!! note ""

    ### **`dipsw5,6,7`**

    默认值：`0`

    屏幕分辨率。仅在 Nu 系统启动程序中使用。

    | 代码 | 分辨率    |
    |------|-----------|
    | 000  | 不修改    |
    | 100  | 640x480   |
    | 010  | 1024x600  |
    | 110  | 1024x768  |
    | 001  | 1280x720  |
    | 101  | 1280x1024 |
    | 110  | 1360x768  |
    | 111  | 1920x1080 |


!!! note ""

    ### **`dipsw8`**

    默认值：`0`

    预留，当前没有任何正式发布的游戏使用。

---

## **[hwmon]**

配置平台硬件监控驱动程序的模拟实现。真实的驱动程序通过读取 Intel 特定模型寄存器（Model Specific Registers）来监控 CPU 温度，而这一操作仅在内核模式下允许执行。

!!! note ""

    ### **`enable`**

    默认值：`1`

    启用硬件监控 (hwmon) 模拟。禁用此选项可使用真实的硬件监控驱动程序。

---

## **[jvs]**

配置 AMEX PCIe JVS 控制器的模拟（非 IO 板！）。

!!! note ""

    ### **`enable`**

    默认值：`1`

    启用 JVS 端口模拟。禁用此选项可使用真实 AMEX 上的 JVS 端口。

---

## **[io4]**

配置 IO4 板的模拟。相同的设置也适用于 [io3]。

!!! note ""

    ### **`enable`**

    默认值：`1`

    启用 IO4 端口模拟。禁用此选项可使用真实 ALLS 上的 IO4 端口。

!!! note ""

    ### **`test`**

    默认值：`0x31`

    测试按钮的虚拟键码，默认是数字键 `1` 。

!!! note ""

    ### **`service`**

    默认值：`0x32`

    服务按钮的虚拟键码，默认是数字键 `2` 。

!!! note ""

    ### **`coin`**

    默认值：`0x33`

    用于增加投币计数的键盘按钮，默认是数字键 `3` 。

---

## **[keychip]**

配置密钥芯片（keychip）的模拟。

!!! note ""

    ### **`enable`**

    默认值：`1`

    启用密钥芯片模拟。禁用此选项可使用真实的密钥芯片。

!!! note ""

    ### **`id`**

    默认值：`A69E-01A88888888`

    密钥芯片序列号。实际中观察到的密钥芯片序列号遵循以下模式：`A\d{2}(E|X)-(01|20)[ABCDU]\d{8}` 。

!!! note ""

    ### **`gameId`**

    默认值：`因游戏而异`

    覆盖游戏的四字符型号代码。将其更改为与游戏预期值不同的值可能会导致系统错误。

!!! note ""

    ### **`platformId`**

    默认值：`因游戏而异`

    覆盖游戏的四字符平台代码（例如，Nu 2 的平台代码是 AAV2）。实际上，这应该是一个单独的三字符 platformId 和整数 modelType 设置，但为了方便起见，它们在此合并。有效值包括：

    | 平台代码 | 平台型号                    |
    |----------|-----------------------------|
    | AAV0     | Nu 1 （初音未来：歌姬计划） |
    | AAV1     | Nu 1.1 （CHUNITHM）         |
    | AAV2     | Nu 2 （头文字D Zero）       |
    | AAW0     | NuSX 1                      |
    | AAW1     | NuSX 1.1                    |
    | ACA0     | ALLS UX                     |
    | ACA1     | ALLS HX                     |
    | ACA2     | ALLS UX （无专用GPU）       |
    | ACA4     | ALLS MX                     |

!!! note ""

    ### **`region`**

    默认值：`1`

    覆盖密钥芯片的区域代码。大多数游戏似乎关注的是 DS EEPROM 区域代码而不是密钥芯片的区域代码，这个区域代码看起来是一个位掩码，用于控制该密钥芯片被授权使用的 Nu PCB 区域代码。因此，它可能只影响系统软件，而不会影响游戏软件。位值为：

    | 区域代码 | 区域                         |
    |----------|------------------------------|
    | 1        | JPN：日本                    |
    | 2        | USA：美国 （未使用）         |
    | 3        | EXP：日本海外 （亚洲市场）   |
    | 4        | CHS：中国大陆 （简体中文？） |


!!! note ""

    ### **`billingCa`**

    默认值：`DEVICE\ca.crt`

    设置计费证书路径。此路径必须与 SSL 计费服务器使用的路径匹配。DER 格式的证书必须小于 1024 字节，因此必须保持较小。

!!! note ""

    ### **`billingPub`**

    默认值：`DEVICE\billing.pub`

    设置实际的密钥芯片 RSA 公钥路径。此公钥必须与计费服务器的私钥 billing.key 匹配，以便解密/加密计费交易。

!!! note ""

    ### **`billingType`**

    默认值：`DEVICE\ca.crt`

    设置密钥芯片的计费“类型”。该类型决定了游戏制作商与 SEGA 之间是否以及如何进行收益分成。一些游戏可能要求使用不同于 1 的类型（例如，《crossbeats REV.》需要计费类型 2），因此如果有这个问题，提供了此选项。计费类型如下：

    | 代码 | 计费类型    |
    |------|-------------|
    | 1    | 没有计费？  |
    | 2    | 计费类型 A  |
    | 3    | 计费类型 B1 |
    | 4    | 计费类型 B2 |


!!! note ""

    ### **`systemFlag`**

    默认值：`0x64`

    一个含义不明确的 8 位位域。最低有效位表示开发者加密狗。更改此值似乎仅对 SEGA AM2 游戏有影响，其他游戏没有明显效果。

!!! note ""

    ### **`subnet`**

    默认值：`192.168.100.0`

    游戏预期的 LAN IP 范围。前缀长度是硬编码在游戏程序中的：对于某些游戏是 /24，对于其他游戏是 /20。

---

## **[netenv]**

配置网络环境虚拟化。该模块有助于绕过游戏的 LAN 环境中的各种限制。

!!! note ""

    ### **`enable`**

    默认值：`1`
    
    启用网络环境虚拟化。如果您希望在局域网中进行对战游戏，可能需要禁用此功能。

    !!! warning "注意"
        
        虚拟化的 LAN IP 范围来自模拟的密钥芯片的 `subnet` 设置。

!!! note ""

    ### **`addrSuffix`**

    默认值：`11`
    
    虚拟化子网中本地主机 IP 地址的最后一个八位字节（例如，如果密钥芯片的子网是 192.168.32.0 且此值设置为 11，则本地主机的虚拟化 LAN IP 为 192.168.32.11）。

!!! note ""

    ### **`routerSuffix`**

    默认值：`1`
    
    虚拟化子网中默认网关 IP 地址的最后一个八位字节。

!!! note ""

    ### **`macAddr`**

    默认值：`01:02:03:04:05:06`
    
    虚拟化以太网适配器的 MAC 地址。确切的值通常不重要。

---

## **[pcbid]**

配置 Windows 主机名虚拟化。ALLS 系列平台不再具有 AMEX 板，因此 MAIN ID 序列号存储在 Windows 主机名中。

!!! note ""

    ### **`enable`**

    默认值：`1`
    
    启用 Windows 主机名虚拟化。仅对于 ALLS 平台的游戏需要此功能（因为 ALLS 没有 AMEX 板，且没有 DS EEPROM，因此需要其他方式来存储 PCB 序列号），但对运行在早期硬件上的游戏没有任何负面影响。

!!! note ""

    ### **`serialNo`**

    默认值：`ACAE01A99999999`
    
    设置 Windows 主机名。此名称应为 ALLS MAIN ID，去掉连字符（因为连字符在 Windows 主机名中不是有效字符）。

---

## **[sram]**

配置 AMEX PCIe 电池供电的 SRAM 模拟。该 SRAM 用于存储账务状态和设置。如果该文件不存在，将自动创建并初始化为适当数量的零字节。

!!! note ""

    ### **`enable`**

    默认值：`1`
    
    启用 SRAM 模拟。禁用此选项可使用真实 AMEX 上的 SRAM。

!!! note ""

    ### **`path`**

    默认值：`DEVICE\sram.bin`
    
    SRAM 模拟存储文件的路径。

---

## **[vfs]**

配置 Windows 路径重定向钩子。

!!! note ""

    ### **`enable`**

    默认值：`1`
    
    配置 Windows 路径重定向钩子。

!!! note ""

    ### **`amfs`**

    默认值：` ` （会导致启动错误）
    
    配置 SEGA AMFS 卷的位置。真实硬件上存储在 E 盘。

!!! note ""

    ### **`appdata`**

    默认值：` ` （会导致启动错误）
    
    配置 SEGA "APPDATA" 卷的位置（与 Windows 用户的 %APPDATA% 目录无关）。真实硬件上存储在 Y 盘。

!!! note ""

    ### **`option`**

    默认值：` `
    
    配置 `option` 数据挂载点的位置。这个挂载点是可选的（因此可能得名），包含小型空中更新内容的目录。